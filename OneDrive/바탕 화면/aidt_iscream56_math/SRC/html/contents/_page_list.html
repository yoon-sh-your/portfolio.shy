<!DOCTYPE html>
<html lang="ko">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>íŒŒì¼ ëª©ë¡</title>

    <!-- DataTables CSS -->
    <link
      rel="stylesheet"
      href="https://cdn.datatables.net/1.13.4/css/jquery.dataTables.min.css"
    />
    <!-- DataTables Buttons CSS -->
    <link
      rel="stylesheet"
      href="https://cdn.datatables.net/buttons/2.3.6/css/buttons.dataTables.min.css"
    />
    <!-- DataTables Select CSS -->
    <link
      rel="stylesheet"
      href="https://cdn.datatables.net/select/1.6.2/css/select.dataTables.min.css"
    />

    <style>
      body {
        margin: 0;
        padding: 8px;
      }
      h2 {
        margin: 0 0 8px 0;
        font-size: 14px;
      }
      table.dataTable {
        margin: 0 !important;
        width: auto !important;
        max-width: 100% !important;
      }
      table.dataTable tbody th,
      table.dataTable tbody td {
        padding: 2px 4px;
        font-size: 11px;
        text-align: center;
        vertical-align: middle;
        white-space: nowrap;
      }
      table.dataTable tbody td:nth-child(3),
      table.dataTable tbody td:last-child {
        text-align: left;
        white-space: normal;
        min-width: 120px;
      }
      table.dataTable tbody tr:nth-child(odd) {
        background: #f8f9fa;
      }
      .open-btn {
        padding: 1px 4px;
        background-color: #f8f9fa;
        border: 1px solid #dee2e6;
        cursor: pointer;
        border-radius: 2px;
        font-size: 11px;
      }
      .open-btn:hover {
        background-color: #e9ecef;
      }
      table.dataTable thead th {
        position: relative;
        text-align: center;
        white-space: nowrap;
        vertical-align: bottom;
        padding: 4px 14px 25px 4px;
        background-color: #f1f3f5;
        border-bottom: 1px solid #dee2e6;
        font-size: 11px;
      }
      .column-filter {
        position: absolute;
        bottom: 2px;
        left: 0;
        right: 0;
        width: 90%;
        margin: 0 auto;
        padding: 1px;
        border: 1px solid #ced4da;
        border-radius: 2px;
        font-size: 10px;
        background-color: white;
        cursor: pointer;
        z-index: 1;
      }
      .dt-buttons {
        margin-bottom: 4px;
        float: left;
      }
      .dt-buttons .dt-button {
        margin-right: 2px;
        padding: 2px 6px;
        border: 1px solid #ced4da;
        border-radius: 2px;
        background-color: white;
        font-size: 11px;
        cursor: pointer;
      }
      .dt-buttons .dt-button:hover {
        background-color: #e9ecef;
      }
      .dataTables_length {
        float: left;
        font-size: 11px;
        margin-right: 8px;
      }
      .dataTables_length select {
        padding: 1px 2px;
        border: 1px solid #ced4da;
        border-radius: 2px;
        margin: 0 2px;
        font-size: 11px;
      }
      .dataTables_filter {
        float: right;
        font-size: 11px;
      }
      .dataTables_filter input {
        padding: 1px 2px;
        border: 1px solid #ced4da;
        border-radius: 2px;
        margin-left: 4px;
        font-size: 11px;
      }
      .dataTables_info {
        font-size: 11px;
        padding: 4px 0;
      }
      .dataTables_paginate {
        font-size: 11px;
        padding: 4px 0;
      }
      .dataTables_paginate .paginate_button {
        padding: 1px 4px;
        margin: 0 1px;
      }
      #file-table {
        border: 1px solid #dee2e6;
        border-radius: 2px;
        border-collapse: collapse;
      }
      .dataTables_wrapper {
        padding: 4px;
      }
      .sorting:before,
      .sorting:after,
      .sorting_asc:before,
      .sorting_asc:after,
      .sorting_desc:before,
      .sorting_desc:after {
        right: 2px !important;
      }
      .sorting:before,
      .sorting_asc:before,
      .sorting_desc:before {
        top: 2px !important;
      }
      .sorting:after,
      .sorting_asc:after,
      .sorting_desc:after {
        top: 8px !important;
      }
    </style>
  </head>
  <body>
    <h2>ìˆ˜í•™ 56 ì‚°ì¶œë¬¼ ëª©ë¡</h2>
    <table id="file-table">
      <thead>
        <tr>
          <th>No</th>
          <th>ë§í¬</th>
          <th>ID</th>
          <th>í•™ë…„</th>
          <th>ë‹¨ì›</th>
          <th>í•™ê¸°</th>
          <th>ì°¨ì‹œ</th>
          <th>ë©”ë‰´</th>
          <th>ì„¸ë¶€ë©”ë‰´</th>
          <th>í™”ë©´ë²ˆí˜¸</th>
          <th>ì‘ì—…ì</th>
          <th>ì œì‘ë‚ ì§œ</th>
          <th>ë¹„ê³ </th>
        </tr>
      </thead>
      <tbody id="file-table-body"></tbody>
    </table>

    <!-- DataTables & jQuery -->
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script src="https://cdn.datatables.net/1.13.4/js/jquery.dataTables.min.js"></script>
    <!-- DataTables Buttons -->
    <script src="https://cdn.datatables.net/buttons/2.3.6/js/dataTables.buttons.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jszip/3.1.3/jszip.min.js"></script>
    <script src="https://cdn.datatables.net/buttons/2.3.6/js/buttons.html5.min.js"></script>
    <script src="https://cdn.datatables.net/buttons/2.3.6/js/buttons.print.min.js"></script>
    <!-- DataTables Select -->
    <script src="https://cdn.datatables.net/select/1.6.2/js/dataTables.select.min.js"></script>

    <script>
      // ì‘ì—…ìë³„ íŒŒì¼ ë°ì´í„° êµ¬ì¡°í™”
      const workerFiles = {
        ê°€ì´ë“œ: {
          "-": [
            "../guide_sample/dragndrop_diagram_multicase.html|ë“œë˜ê·¸ì•¤ë“œë¡­-ë„í˜•ë©€í‹°ì¼€ì´ìŠ¤",
            "../guide_sample/custom_answer_check.html|ì»¤ìŠ¤í…€ ì •ë‹µ ì²´í¬ ì‚¬ìš©ë²• ê°€ì´ë“œ",
            "../guide_sample/boolean.html|ì°¸/ê±°ì§“ ì„ íƒ ì»´í¬ë„ŒíŠ¸",
            "../guide_sample/cardflip.html|ì¹´ë“œ ë’¤ì§‘ê¸° ì»´í¬ë„ŒíŠ¸", 
            "../guide_sample/context.html|ë¬¸ë§¥ ì»´í¬ë„ŒíŠ¸",
            "../guide_sample/dragndrop_eraser.html|ì§€ìš°ê°œ ë“œë˜ê·¸ ì»´í¬ë„ŒíŠ¸",
            "../guide_sample/dragndrop_limit.html|ì œí•œì˜ì—­ ë“œë˜ê·¸ ì»´í¬ë„ŒíŠ¸",
            "../guide_sample/dragndrop_fraction.html|ìˆ˜ì‹ë§Œë“¤ê¸° ë“œë˜ê·¸ ì»´í¬ë„ŒíŠ¸",
            "../guide_sample/drawline_calc.html|ìˆ˜ì‹ ì„ ì‡ê¸° ì»´í¬ë„ŒíŠ¸",
            "../guide_sample/drawline_grid.html|ê·¸ë¦¬ë“œ ì  ì—°ê²°ì„  ì»´í¬ë„ŒíŠ¸",
            "../guide_sample/drawline.html|ì„ ì‡ê¸° ì»´í¬ë„ŒíŠ¸",
            "../guide_sample/header.html|í—¤ë” ì»´í¬ë„ŒíŠ¸",
            "../guide_sample/input.html|ì…ë ¥ ì»´í¬ë„ŒíŠ¸",
            "../guide_sample/module.html|ì‚¼ê°ì, ëˆˆê¸ˆì, ê³„ì‚°ê¸°",
            "../guide_sample/paging.html|í˜ì´ì§• ì»´í¬ë„ŒíŠ¸",
            "../guide_sample/problem_generator.html|ë¬¸ì œ ìƒì„±ê¸° ì»´í¬ë„ŒíŠ¸",
            "../guide_sample/reveal.html|ìˆ¨ê¹€/ë³´ì´ê¸° ì»´í¬ë„ŒíŠ¸",
            "../guide_sample/self_check.html|ìê°€ì§„ë‹¨ ì»´í¬ë„ŒíŠ¸",
            "../guide_sample/vedio_player.html|ë™ì˜ìƒ í”Œë ˆì´ì–´ ì»´í¬ë„ŒíŠ¸",
            "../guide_sample/zoomimage.html|ì´ë¯¸ì§€ í™•ëŒ€/ì¶•ì†Œ ì»´í¬ë„ŒíŠ¸",
            "../guide_sample/boolean_roundarea.html|ì›í˜• ê·¸ë˜í”„ ì»´í¬ë„ŒíŠ¸",
            "../contents/EMA615_03_SU_0005_s.html|ì›í˜• ê·¸ë˜í”„ ì»´í¬ë„ŒíŠ¸ í™œìš© ì˜ˆì‹œ í™”ë©´1",
            "../contents/EMA615_03_SU_0004_s.html|ì›í˜• ê·¸ë˜í”„ ì»´í¬ë„ŒíŠ¸ í™œìš© ì˜ˆì‹œ í™”ë©´2",
            "../guide_sample/change_answer1.html|ì¹´ìš´íŒ… ì»´í¬ë„ŒíŠ¸",
            "../contents/EMA616_02_SU_0003_s.html|ì¹´ìš´íŒ… ì»´í¬ë„ŒíŠ¸ í™œìš© ì˜ˆì‹œ í™”ë©´1",
            "../guide_sample/ladder_animation.html|ì‚¬ë‹¤ë¦¬ ì• ë‹ˆë©”ì´ì…˜ ì»´í¬ë„ŒíŠ¸",
            "../practice/EMA521_11_IH_0001_s.html|ì‚¬ë‹¤ë¦¬ ì• ë‹ˆë©”ì´ì…˜ ì»´í¬ë„ŒíŠ¸ í™œìš© ì˜ˆì‹œ í™”ë©´1",
            "../guide_sample/range_answer1.html|ë²”ìœ„ ë‹µì•ˆ ì»´í¬ë„ŒíŠ¸",
            "../contents/EMA516_04_SU_0004_s.html|ê·¸ë¦¬ê¸° ëª¨ë“ˆ ì œì–´ ê°€ëŠ¥í•œ ê³µìš© ì§€ìš°ê°œ ë²„íŠ¼",
            "../practice/EMA516_17_IH_0001_s.html|í™”ë©´ ì „ì²´ í™•ëŒ€/ì¶•ì†Œ ì»´í¬ë„ŒíŠ¸",
          ],
        },
        
      };

      // íŒŒì¼ ë°ì´í„°ë¥¼ ë°°ì—´ë¡œ ë³€í™˜
      const htmlFiles = [];
      for (const [worker, dates] of Object.entries(workerFiles)) {
        for (const [date, files] of Object.entries(dates)) {
          files.forEach((file) => {
            htmlFiles.push({
              worker,
              date,
              file,
            });
          });
        }
      }

      function parseFileName(fileData, index) {
        let splitData = fileData.file.split("|");
        let filePath = splitData[0];
        let remarks = splitData[1] || "";

        if (filePath.startsWith("../")) {
          let extractedName = filePath.split("/").pop().replace(".html", "");

          return {
            Index: index + 1,
            ID: extractedName,
            í•™ë…„: "-",
            ë‹¨ì›: "-",
            í•™ê¸°: "-",
            ì°¨ì‹œ: "-",
            ë©”ë‰´: "ê°€ì´ë“œ",
            ì„¸ë¶€ë©”ë‰´: "-",
            í™”ë©´ë²ˆí˜¸: "-",
            ì‘ì—…ì: fileData.worker,
            ì œì‘ë‚ ì§œ: fileData.date,
            ë¹„ê³ : remarks,
            íŒŒì¼ëª…: filePath,
            isSimpleLink: true,
          };
        } else {
          const rawName = filePath.replace(".html", "");
          const fileType = rawName.substring(10, rawName.indexOf("_", 10));

          const info = {
            Index: index + 1,
            isSimpleLink: false,
            ID: rawName,
            í•™ë…„: rawName.substring(3, 4),
            í•™ê¸°: rawName.substring(4, 5),
            ë‹¨ì›: rawName.substring(5, 6),
            ì°¨ì‹œ: rawName.substring(7, 9),
            í™”ë©´ë²ˆí˜¸: rawName.substring(
              rawName.indexOf("_", 10) + 1,
              rawName.indexOf("_", 10) + 5
            ),
            ì‘ì—…ì: fileData.worker,
            ì œì‘ë‚ ì§œ: fileData.date,
            ë¹„ê³ : remarks,
            íŒŒì¼ëª…: filePath,
          };

          // ë©”ë‰´ì™€ ì„¸ë¶€ ë©”ë‰´ ì„¤ì •
          switch (fileType) {
            case "SU":
              info.ë©”ë‰´ = "ì§„ë„í•™ìŠµ";
              info.ì„¸ë¶€ë©”ë‰´ = "ìˆ˜ì—…";
              break;
            case "IH":
              info.ë©”ë‰´ = "ìˆ˜í•™ì˜í˜";
              info.ì„¸ë¶€ë©”ë‰´ = "ìˆ˜í•™ìµí˜";
              break;
            case "SJ":
              info.ë©”ë‰´ = "ë³´íƒ¬ìë£Œ";
              info.ì„¸ë¶€ë©”ë‰´ = "ìˆ˜ì¤€ë³„ ìë£Œ";
              break;
            case "HJ":
              info.ë©”ë‰´ = "ë³´íƒ¬ìë£Œ";
              info.ì„¸ë¶€ë©”ë‰´ = "í™œë™ ìë£Œ";
              break;
            case "YS":
              info.ë©”ë‰´ = "ë³´íƒ¬ìë£Œ";
              info.ì„¸ë¶€ë©”ë‰´ = "ì˜ìƒ";
              break;
            case "JP":
              info.ë©”ë‰´ = "í‰ê°€";
              info.ì„¸ë¶€ë©”ë‰´ = "ì§„ë‹¨ í‰ê°€";
              break;
            case "HP":
              info.ë©”ë‰´ = "í‰ê°€";
              info.ì„¸ë¶€ë©”ë‰´ = "í˜•ì„± í‰ê°€";
              break;
            case "DP":
              info.ë©”ë‰´ = "í‰ê°€";
              info.ì„¸ë¶€ë©”ë‰´ = "ë‹¨ì› í‰ê°€";
              break;
            case "SP":
              info.ë©”ë‰´ = "í‰ê°€";
              info.ì„¸ë¶€ë©”ë‰´ = "ìˆ˜í–‰ í‰ê°€";
              break;
            case "CP":
              info.ë©”ë‰´ = "í‰ê°€";
              info.ì„¸ë¶€ë©”ë‰´ = "ì¢…í•© í‰ê°€";
              break;
            case "AUP":
              info.ë©”ë‰´ = "í‰ê°€";
              info.ì„¸ë¶€ë©”ë‰´ = "AI ì§„ë‹¨ í‰ê°€";
              break;
            case "GJ":
              info.ë©”ë‰´ = "ìŠ¤ìŠ¤ë¡œ í•™ìŠµ";
              info.ì„¸ë¶€ë©”ë‰´ = "ê³¼ì œ";
              break;
            case "MI":
              info.ë©”ë‰´ = "ìŠ¤ìŠ¤ë¡œ í•™ìŠµ";
              info.ì„¸ë¶€ë©”ë‰´ = "ë©”ì¼ ì—°ì–´";
              break;
            case "WS":
              info.ë©”ë‰´ = "ë³´íƒ¬ìë£Œ";
              info.ì„¸ë¶€ë©”ë‰´ = "ì›Œí¬ì‹œíŠ¸";
              break;
            case "DH":
              info.ë©”ë‰´ = "ë³´íƒ¬ìë£Œ";
              info.ì„¸ë¶€ë©”ë‰´ = "ë‹¨ì–´ í™œë™";
              break;
            case "EW":
              info.ë©”ë‰´ = "ë³´íƒ¬ìë£Œ";
              info.ì„¸ë¶€ë©”ë‰´ = "ìš©ì–´";
              break;
            default:
              info.ë©”ë‰´ = "-";
              info.ì„¸ë¶€ë©”ë‰´ = "-";
          }

          return info;
        }
      }

      function populateTable() {
        const tbody = document.getElementById("file-table-body");
        tbody.innerHTML = "";

        htmlFiles.forEach((file, index) => {
          const data = parseFileName(file, index);
          if (!data) return;

          let row = document.createElement("tr");

          if (data.isSimpleLink) {
            row.innerHTML = `
                        <td>${data.Index}</td>
                        <td>
                            <button class="open-btn" onclick="openFile('${data.íŒŒì¼ëª…}')">ğŸ“‚</button>
                        </td>
                        <td>${data.ID}</td>
                        <td>-</td>
                        <td>-</td>
                        <td>-</td>
                        <td>-</td>
                        <td>ê°€ì´ë“œ</td>
                        <td>-</td>
                        <td>-</td>
                        <td>${data.ì‘ì—…ì}</td>
                        <td>${data.ì œì‘ë‚ ì§œ}</td>
                        <td>${data.ë¹„ê³ }</td>
                    `;
          } else {
            row.innerHTML = `
                        <td>${data.Index}</td>
                        <td>
                            <button class="open-btn" onclick="openFile('${data.íŒŒì¼ëª…}')">ğŸ“‚</button>
                        </td>
                        <td>${data.ID}</td>
                        <td>${data.í•™ë…„}</td>
                        <td>${data.ë‹¨ì›}</td>
                        <td>${data.í•™ê¸°}</td>
                        <td>${data.ì°¨ì‹œ}</td>
                        <td>${data.ë©”ë‰´}</td>
                        <td>${data.ì„¸ë¶€ë©”ë‰´}</td>
                        <td>${data.í™”ë©´ë²ˆí˜¸}</td>
                        <td>${data.ì‘ì—…ì}</td>
                        <td>${data.ì œì‘ë‚ ì§œ}</td>
                        <td>${data.ë¹„ê³ }</td>
                    `;
          }
          tbody.appendChild(row);
        });

        // DataTables ì ìš©
        const table = $("#file-table").DataTable({
          destroy: true,
          order: [[0, "asc"]],
          pageLength: 25,
          lengthMenu: [10, 25, 50, 100],
          dom: '<"d-flex justify-content-between"Bl>frtip',
          ordering: true,
          orderCellsTop: true,
          autoWidth: true,
          columnDefs: [
            { orderable: false, targets: 1, width: "30px" },
            { targets: 0, width: "30px" },
            { targets: 2, width: "auto", minWidth: "120px" },
            { targets: [3, 4, 5, 6], width: "30px" },
            { targets: [7, 8], width: "60px" },
            { targets: 9, width: "50px" },
            { targets: [10, 11], width: "60px" },
            { targets: 12, width: "auto", minWidth: "120px" },
            { type: "natural", targets: [3, 4, 5, 6] },
            { type: "date", targets: 11 },
            {
              targets: [0, 3, 4, 5, 6, 7, 8, 9, 10, 11],
              className: "dt-center",
            },
            {
              targets: [2, 12],
              className: "dt-left",
            },
          ],
          buttons: [
            {
              text: "ë³µì‚¬",
              extend: "copy",
              className: "btn-sm",
            },
            {
              text: "ì—‘ì…€",
              extend: "excel",
              className: "btn-sm",
            },
            {
              text: "ì¸ì‡„",
              extend: "print",
              className: "btn-sm",
            },
            {
              text: "í•„í„° ì´ˆê¸°í™”",
              className: "btn-sm",
              action: function (e, dt, node, config) {
                dt.search("").columns().search("").draw();
                $(".column-filter").val("");
              },
            },
          ],
          language: {
            search: "ê²€ìƒ‰:",
            lengthMenu: "_MENU_ê°œ",
            info: "_TOTAL_ê°œ ì¤‘ _START_~_END_",
            infoEmpty: "ë°ì´í„° ì—†ìŒ",
            emptyTable: "ë°ì´í„° ì—†ìŒ",
            paginate: {
              first: "ì²˜ìŒ",
              last: "ë",
              next: "ë‹¤ìŒ",
              previous: "ì´ì „",
            },
          },
          initComplete: function () {
            const filterColumns = [
              { idx: 3, title: "í•™ë…„", values: ["1", "2", "3", "4", "5", "6"] },
              {
                idx: 4,
                title: "ë‹¨ì›",
                values: ["1", "2", "3", "4", "5", "6", "7", "8"],
              },
              { idx: 5, title: "í•™ê¸°", values: ["1", "2"] },
              {
                idx: 6,
                title: "ì°¨ì‹œ",
                values: [
                  "00",
                  "01",
                  "02",
                  "03",
                  "04",
                  "05",
                  "06",
                  "07",
                  "08",
                  "09",
                  "10",
                ],
              },
              {
                idx: 7,
                title: "ë©”ë‰´",
                values: [
                  "ì§„ë„í•™ìŠµ",
                  "ìˆ˜í•™ì˜í˜",
                  "ë³´íƒ¬ìë£Œ",
                  "í‰ê°€",
                  "ìŠ¤ìŠ¤ë¡œ í•™ìŠµ",
                ],
              },
              {
                idx: 8,
                title: "ì„¸ë¶€ë©”ë‰´",
                values: [
                  "ìˆ˜ì—…",
                  "ìˆ˜í•™ìµí˜",
                  "ìˆ˜ì¤€ë³„ ìë£Œ",
                  "í™œë™ ìë£Œ",
                  "ì˜ìƒ",
                  "ì§„ë‹¨ í‰ê°€",
                  "í˜•ì„± í‰ê°€",
                  "ë‹¨ì› í‰ê°€",
                  "ìˆ˜í–‰ í‰ê°€",
                  "ì¢…í•© í‰ê°€",
                  "AI ì§„ë‹¨ í‰ê°€",
                  "ê³¼ì œ",
                  "ë©”ì¼ ì—°ì–´",
                  "ì›Œí¬ì‹œíŠ¸",
                  "ë‹¨ì–´ í™œë™",
                  "ìš©ì–´",
                ],
              },
              { idx: 9, title: "í™”ë©´ë²ˆí˜¸", dynamic: true },
              {
                idx: 10,
                title: "ì‘ì—…ì",
                values: [
                  "ê¹€ìš©í˜„",
                  "ì„ìˆ˜í¬",
                  "ê¹€ìˆ˜ë¯¼",
                  "ê¹€ì•„ë¦°",
                  "ì´ìˆ˜ì—°",
                  "ì •í¬ì›",
                  "ë°•ë‚˜ìœ¨",
                ],
              },
              { idx: 11, title: "ì œì‘ë‚ ì§œ", dynamic: true },
              { idx: 12, title: "ë¹„ê³ ", dynamic: true },
            ];

            filterColumns.forEach((filter) => {
              const column = this.api().column(filter.idx);
              const header = $(column.header());

              header.find(".column-filter").remove();

              const select = $(
                '<select class="column-filter"><option value="">ì „ì²´</option></select>'
              );

              let values = filter.values;
              if (filter.dynamic) {
                values = column
                  .data()
                  .unique()
                  .toArray()
                  .filter((v) => v && v !== "-" && v.trim() !== "")
                  .sort();
              }

              values.forEach((value) => {
                if (value && value.trim()) {
                  select.append(`<option value="${value}">${value}</option>`);
                }
              });

              header.append(select);

              select
                .on("click", function (e) {
                  e.stopPropagation();
                })
                .on("change", function () {
                  const val = $(this).val();
                  column.search(val ? `^${val}$` : "", true, false).draw();
                });
            });
          },
        });
      }

      function openFile(fileName) {
        // íŒŒì¼ ê²½ë¡œê°€ "../"ë¡œ ì‹œì‘í•˜ëŠ” ê²½ìš°, í˜„ì¬ ë””ë ‰í† ë¦¬ ê¸°ì¤€ìœ¼ë¡œ ì ‘ê·¼
        let filePath = fileName.startsWith("../") ? fileName : `./${fileName}`;
        window.open(filePath, "_blank");
      }

      populateTable();
    </script>
  </body>
</html>
